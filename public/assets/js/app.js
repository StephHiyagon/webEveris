"use strict";var filtroContacto=function(a,e){return state.personal.filter(function(e){return e.Apellido.toLowerCase().indexOf(a)>-1||e.Apellido2.toLowerCase().indexOf(a)>-1||e.Nombre.toLowerCase().indexOf(a)>-1||e.DatosEmpleado.EMPLOYEE_NUMBER.toLowerCase().indexOf(a)>-1})},reRender=function(a,e,s){e.empty(),a.forEach(function(a){e.append(showItem(a,e,s))})},showItem=function(a,e,s){var n=$('<div class="row"></div>'),t=$('<span class="item-place__title col s9">'+a.Nombre+"   "+a.Apellido+"   "+a.Apellido2+"</span>"),i=$('<span class="col s3">'+a.DatosEmpleado.EMPLOYEE_NUMBER+"</span>"),o=$("<div></div>"),l=$('<div class="col m5 s12"><img src=""></div>'),d=$('<div class="col m7 s12"></div>'),r=$("<h5>"+a.Nombre+"  "+a.Apellido+"   "+a.Apellido2+"</h5> <br>"),p=$('<p><span class="strong"> Correo: </span>'+a.DatosEmpleado.EMAIL+"</p>"),c=$('<p><span class="strong"> N° Empleado: </span>'+a.DatosEmpleado.EMPLOYEE_NUMBER+"</p>");return n.append(t),n.append(i),d.append(r),d.append(c),d.append(p),o.append(l),o.append(d),n.on("click",function(a){a.preventDefault(),e.empty(),e.hide(),s.empty(),s.append(o)}),e.show(),n},render=function(a){a.empty();var e=$('<div class="wrapper"></div>'),s=function(){render(a)};switch(e.append(Navbar(s)),state.page){case"buscar":e.append(Buscar(s))}a.append(e)},state={page:null,user:null,news:null};$(function(a){$.get("https://hackathon-ef798.firebaseio.com/getemployee.json",function(a){if(!a)return alert("no hay data gg");state.user=a.persona,console.log(a.persona),$.get("https://hackathon-ef798.firebaseio.com/news.json",function(a){if(!a)return alert("no hay data gg");state.news=a.data,console.log(state.news)});var e=$("#root");render(e)})});var validarLetra=function(a){a.which>47&&a.which<58&&a.preventDefault()},Buscar=function(a){var e=$('<div class=""></div>'),s=$('<div class="row"></div>'),n=$('<form class="col s12 m8 l6 offset-l3 offset-m2" autocomplete="off"></form>'),t=$('<div class="row"></div>'),i=$('<div class="input-field col s12"><i class="material-icons prefix">search</i></div>'),o=$('<input id="icon_prefix" type="text" class="search">'),l=$('<label for="icon_prefix">Buscar</label>'),d=$('<div class="autocompleted"></div>'),r=$('<div class="resultado row"></div>'),p=$('<div class="col s12 m8 l6 offset-l3 offset-m2"></div>');i.append(o),i.append(l),i.append(d),t.append(i),n.append(t),s.append(n),e.append(s),r.append(p);var c=void 0;return o.on({keyup:function(a){""!=$(a.currentTarget).val()?(c=filtroContacto($(this).val().toLowerCase(),d),reRender(c,d,p)):(d.hide(),d.empty())}}),e.append(r),e};$(function(a){$.get("https://hackathon-ef798.firebaseio.com/findemployees.json",function(a){if(!a)return alert("no hay data");state.personal=a.Personal})});var Dashboard=function(a){var e=$('<div class="container"></div>'),s=$('<div class="row"></div>'),n=$('<div class="col s12 col m4 center-align"></div>'),t=$('<img src="'+state.user.foto+'" alt="foto de perfil"/>'),i=$('<p class="blue-text">'+state.user.nombrePersona+" "+state.user.apellidoPersona+"</p>"),o=$('<div class="col s12 col m8"></div>'),l=$("<div><h4>News</h4></div>");state.news.forEach(function(a){a.attachments.data[0].title,console.log(a.attachments.data[0].title),l.append("<h5>"+a.attachments.data[0].title+"</h5>")});return e.append(s),s.append(n),n.append(t),n.append(i),s.append(o),o.append(l),e},Login=function(a){var e=$('<div class="flex row"></div>'),s=$('<form class="col s6 offset-s3 flex"></form>'),n=$('<div class=" input-field"><div>'),t=$('<input id="last_name" type="text" class="validate">'),i=$('<label for="last_name">Usuario</label>'),o=$('<div class=" input-field"><div>'),l=$('<input id="password" type="password" class="validate">'),d=$('<label for="password">Contraseña</label>'),r=$('<a class="center-align waves-effect waves-light btn-large">Entrar</a>');return e.append(s),s.append(n,o),n.append(t,i),o.append(l,d),s.append(r),r.on("click",function(){state.page=Dashboard,a()}),e},Navbar=function(a){var e=$("<div class='header'></div>"),s=$("<div class='row menu'></div>"),n=$("<a href='#' class='brand-logo col s2'>Everis</a>"),t=($('<div class="col s7 usuario"><img src="'+state.user.foto+'">Hola <span>'+state.user.nombrePersona+"</span></div>"),$("<a href='#' data-activates='mobile-demo' class='button-collapse col s3 right-align'></a>")),i=$("<i class='material-icons'>menu</i>"),o=($("<ul class='right hide-on-med-and-down'></ul>"),$("<ul class='side-nav' id='mobile-demo'></ul>")),l=$('<a href="#" class="close right"><i class="material-icons">close</i></a>'),d=$("<li><a href='#' class='links' data-link='perfil'>Perfil</a></li>"),r=$('<li><a href="#" class="links" data-link="beneficios">Beneficios</a></li>'),p=$('<li><a href="#" class="links" data-link="comunicados">Comunicados</a></li>'),c=$('<li><a href="#" class="links" data-link="buscar">Buscar Colaboradores</a></li>');return t.append(i),o.append(l),o.append(d),o.append(r),o.append(p),o.append(c),s.append(n),s.append(t),e.append(s),e.append(o),$(function(e){$(".button-collapse").sideNav({menuWidth:300,edge:"right"}),$(".close").on("click",function(a){$(".side-nav").sideNav("hide")}),$(".links").on("click",function(e){switch(e.preventDefault(),$(".side-nav").sideNav("hide"),$(this).data("link")){case"perfil":state.page="perfil",a();break;case"beneficios":state.page="beneficios",a();break;case"comunicados":state.page="comunicados",a();break;case"buscar":state.page="buscar",a()}})}),e};